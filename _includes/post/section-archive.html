<div class="pagged-list">
    {%for post in site.posts %} {% unless post.next %}
    <h5>{{ post.date | date: '%Y' }}</h5>
    <ul class="this">
        {% else %} {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %} {% capture nyear %}{{ post.next.date | date: '%Y'
        }}{% endcapture %} {% if year != nyear %}
    </ul>
    <h5>{{ post.date | date: '%Y' }}</h5>
    <ul class="past">
        {% endif %} {% endunless %}
        <li>
            <a href="{{ post.url }}">
                <time>{{ post.date | date:"%d %b" }}</time> - {{ post.title }}</a>
        </li>
        {% endfor %}
    </ul>
</div>